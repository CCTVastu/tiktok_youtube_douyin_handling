import requests
import json
import os


# keyword = 'funny'
# offset = '0'
# url = f'https://www.tiktok.com/api/search/general/full/?aid=1988&app_language=zh-Hant-TW&app_name=tiktok_web&battery_info=1&browser_language=zh-CN&browser_name=Mozilla&browser_online=true&browser_platform=MacIntel&browser_version=5.0%20%28Macintosh%3B%20Intel%20Mac%20OS%20X%2010_15_7%29%20AppleWebKit%2F537.36%20%28KHTML%2C%20like%20Gecko%29%20Chrome%2F107.0.0.0%20Safari%2F537.36&channel=tiktok_web&cookie_enabled=true&device_id=7173961358269646337&device_platform=web_pc&focus_state=true&from_page=search&history_len=3&is_fullscreen=false&is_page_visible=true&keyword=funny&offset=0&os=mac&priority_region=&referer=&region=SG&screen_height=1080&screen_width=1920&tz_name=Asia%2FShanghai&webcast_language=zh-Hant-TW'
# headers = {
#     'user-agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/107.0.0.0 Safari/537.36',
#     'cookie': 'tt_csrf_token=WNzIcoNY-wy-KNgVoJo8ZB6QOtKXC4geDlTg; tt_chain_token=GMqzqYdmMbJpHaBk+UUhdg==; tiktok_webapp_theme=light; ak_bmsc=349C7752F2AF3CA03207ACD28780895F~000000000000000000000000000000~YAAQNqs0F6skEcGEAQAAauy25hKJiwq0j+AmaMvqK4UhvuHZf/Qt1ZaUvt5Lq9Ylo/fWJgA38filVbgwbXtuGJZNfwYFvYJpJ7IzEs36g3iVcPjh092Lr1zi49vcGxK/vOuHexRz9GCLLZhdBGPrdPpCKX6xg3UlI9UWR9SUtcxkRdkV8RSmcAlwtV+E5ZxPcU34UQHG3lFF93ohbfiKNJdYFxbBc/5zeHoJJyd8LnD17gGK48NPZ1qe62zrzzUK+OCRpxRpUMcO3KJn1T4j8Qj1R/yrdgxbvSA9UKjbwIPTZAxPh4ZrTyAts2jtNMIHSmE80qcuu1DtYqw58T/sKhfao3D17nGE61cFZvqo9K1f1YOE7M6TL7RqPagf1V+umGBECsP0X4qk6KXyek0jpO0280Dr0LLWA3oYGN35FvKOekyceCYs2o7sjYTG+4egv9FeM7ApX6ZJBKrftqP0Y34cIthL0uGYdmE1ZlSfW7LpgxigLfQB2kaXCQ==; ttwid=1%7CxI0mD1Yz4JYzTm5ugF7WCxZFsftzyIM9NW_GgVrzFxE%7C1670318190%7C087ebd1daa4f59fcff0039f30f19ced6d3a7018e3ecfbb30ada6831fba31f14f; msToken=AyoMfpQsLreOPctkAl243PA13WhJ0WEikAjtLWjJFo8cO23DbNdlXjSf7gNj_lHf--wzLiN3rjo2cUxxn3ruL5AeyVhYWi6Jce0RMEWKrbsW47Unl9MBBl-JuLJ-_U1ZDI5sKyDajgYa-sUD; bm_sv=51043CEE1C16967790C085A953E05E8C~YAAQVh0gF3wqMOWEAQAAj5jZ5hLuoIgn1JYkLn149jy8K5dpvVDimdPVllwWkoPn8ubWhMNxUn3LXLMM+4kTy7l0X/zC4Jn1WLrM5MvUPhy4Cjwk8fWzHDe1RiAP9FlrjJ9k6LamOrXMQ5ODya1UfWl6Asg9gEJZOQVRZ9JeSsGO+iMUCw2li3OuFr1o+zCE7OL/flcrcNcp2K8rw88u/ZkNozFngWJNV4XHlhfGa2YDYsRs7NV8q4mu1AwKmg9x~1'
#            }
# cookie = 'tt_csrf_token=WNzIcoNY-wy-KNgVoJo8ZB6QOtKXC4geDlTg; tt_chain_token=GMqzqYdmMbJpHaBk+UUhdg==; tiktok_webapp_theme=light; ak_bmsc=349C7752F2AF3CA03207ACD28780895F~000000000000000000000000000000~YAAQNqs0F6skEcGEAQAAauy25hKJiwq0j+AmaMvqK4UhvuHZf/Qt1ZaUvt5Lq9Ylo/fWJgA38filVbgwbXtuGJZNfwYFvYJpJ7IzEs36g3iVcPjh092Lr1zi49vcGxK/vOuHexRz9GCLLZhdBGPrdPpCKX6xg3UlI9UWR9SUtcxkRdkV8RSmcAlwtV+E5ZxPcU34UQHG3lFF93ohbfiKNJdYFxbBc/5zeHoJJyd8LnD17gGK48NPZ1qe62zrzzUK+OCRpxRpUMcO3KJn1T4j8Qj1R/yrdgxbvSA9UKjbwIPTZAxPh4ZrTyAts2jtNMIHSmE80qcuu1DtYqw58T/sKhfao3D17nGE61cFZvqo9K1f1YOE7M6TL7RqPagf1V+umGBECsP0X4qk6KXyek0jpO0280Dr0LLWA3oYGN35FvKOekyceCYs2o7sjYTG+4egv9FeM7ApX6ZJBKrftqP0Y34cIthL0uGYdmE1ZlSfW7LpgxigLfQB2kaXCQ==; ttwid=1%7CxI0mD1Yz4JYzTm5ugF7WCxZFsftzyIM9NW_GgVrzFxE%7C1670318190%7C087ebd1daa4f59fcff0039f30f19ced6d3a7018e3ecfbb30ada6831fba31f14f; msToken=AyoMfpQsLreOPctkAl243PA13WhJ0WEikAjtLWjJFo8cO23DbNdlXjSf7gNj_lHf--wzLiN3rjo2cUxxn3ruL5AeyVhYWi6Jce0RMEWKrbsW47Unl9MBBl-JuLJ-_U1ZDI5sKyDajgYa-sUD; bm_sv=51043CEE1C16967790C085A953E05E8C~YAAQVh0gF3wqMOWEAQAAj5jZ5hLuoIgn1JYkLn149jy8K5dpvVDimdPVllwWkoPn8ubWhMNxUn3LXLMM+4kTy7l0X/zC4Jn1WLrM5MvUPhy4Cjwk8fWzHDe1RiAP9FlrjJ9k6LamOrXMQ5ODya1UfWl6Asg9gEJZOQVRZ9JeSsGO+iMUCw2li3OuFr1o+zCE7OL/flcrcNcp2K8rw88u/ZkNozFngWJNV4XHlhfGa2YDYsRs7NV8q4mu1AwKmg9x~1'
# cookies = {one.split('=')[0]: one.split('=')[-1] for one in cookie.split('; ')}
# print('cookies: ', cookies)
# res = requests.get(url=url, headers=headers)
# print(res.status_code)
# print(res.content)



codes = "curl 'https://www.tiktok.com/api/search/general/full/?aid=1988&app_language=zh-Hant-TW&app_name=tiktok_web&battery_info=1&browser_language=zh-CN&browser_name=Mozilla&browser_online=true&browser_platform=MacIntel&browser_version=5.0%20%28Macintosh%3B%20Intel%20Mac%20OS%20X%2010_15_7%29%20AppleWebKit%2F537.36%20%28KHTML%2C%20like%20Gecko%29%20Chrome%2F107.0.0.0%20Safari%2F537.36&channel=tiktok_web&cookie_enabled=true&device_id=7173961358269646337&device_platform=web_pc&focus_state=true&from_page=search&history_len=3&is_fullscreen=false&is_page_visible=true&keyword=funny&offset=0&os=mac&priority_region=&referer=&region=SG&screen_height=1080&screen_width=1920&tz_name=Asia%2FShanghai&webcast_language=zh-Hant-TW' \
  -H 'cookie: tt_csrf_token=WNzIcoNY-wy-KNgVoJo8ZB6QOtKXC4geDlTg; tt_chain_token=GMqzqYdmMbJpHaBk+UUhdg==; tiktok_webapp_theme=light; ak_bmsc=349C7752F2AF3CA03207ACD28780895F~000000000000000000000000000000~YAAQNqs0F6skEcGEAQAAauy25hKJiwq0j+AmaMvqK4UhvuHZf/Qt1ZaUvt5Lq9Ylo/fWJgA38filVbgwbXtuGJZNfwYFvYJpJ7IzEs36g3iVcPjh092Lr1zi49vcGxK/vOuHexRz9GCLLZhdBGPrdPpCKX6xg3UlI9UWR9SUtcxkRdkV8RSmcAlwtV+E5ZxPcU34UQHG3lFF93ohbfiKNJdYFxbBc/5zeHoJJyd8LnD17gGK48NPZ1qe62zrzzUK+OCRpxRpUMcO3KJn1T4j8Qj1R/yrdgxbvSA9UKjbwIPTZAxPh4ZrTyAts2jtNMIHSmE80qcuu1DtYqw58T/sKhfao3D17nGE61cFZvqo9K1f1YOE7M6TL7RqPagf1V+umGBECsP0X4qk6KXyek0jpO0280Dr0LLWA3oYGN35FvKOekyceCYs2o7sjYTG+4egv9FeM7ApX6ZJBKrftqP0Y34cIthL0uGYdmE1ZlSfW7LpgxigLfQB2kaXCQ==; ttwid=1%7CxI0mD1Yz4JYzTm5ugF7WCxZFsftzyIM9NW_GgVrzFxE%7C1670318190%7C087ebd1daa4f59fcff0039f30f19ced6d3a7018e3ecfbb30ada6831fba31f14f; msToken=AyoMfpQsLreOPctkAl243PA13WhJ0WEikAjtLWjJFo8cO23DbNdlXjSf7gNj_lHf--wzLiN3rjo2cUxxn3ruL5AeyVhYWi6Jce0RMEWKrbsW47Unl9MBBl-JuLJ-_U1ZDI5sKyDajgYa-sUD; bm_sv=51043CEE1C16967790C085A953E05E8C~YAAQVh0gF3wqMOWEAQAAj5jZ5hLuoIgn1JYkLn149jy8K5dpvVDimdPVllwWkoPn8ubWhMNxUn3LXLMM+4kTy7l0X/zC4Jn1WLrM5MvUPhy4Cjwk8fWzHDe1RiAP9FlrjJ9k6LamOrXMQ5ODya1UfWl6Asg9gEJZOQVRZ9JeSsGO+iMUCw2li3OuFr1o+zCE7OL/flcrcNcp2K8rw88u/ZkNozFngWJNV4XHlhfGa2YDYsRs7NV8q4mu1AwKmg9x~1' \
  -H 'user-agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/107.0.0.0 Safari/537.36' \
  --compressed"
data = os.popen(codes).read()
print(data, type(data))
# with open('tiktok.json', 'w')as f:
#     f.write(data)